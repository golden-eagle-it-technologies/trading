<!DOCTYPE html>
<html>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>
    <title>{% block title %}Dashbord {% endblock %}</title>
    {% block css %}
    <link href="/static/dashbord/css/application.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="img/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta charset="utf-8">
    <script>
    </script>
    {% endblock %}
</head>

<body>
    <div class="logo">
        <h4><a href="{% url 'accounts-profile'%}">IQ <strong>oprionexperts</strong></a></h4>
    </div>
    {% include 'dashbord/includes/sidebar.html'%}   

    <div class="wrap">
        {% include 'dashbord/includes/menu.html'%}.
        <div class="content container">
            <h2 class="page-title">{% block page_title %}Dashboard <small>Statistics and more</small>{% endblock page_title %}</h2>
        

        {% block content %}

        {% endblock content %}
        </div>

        <div class="loader-wrap hiding hide">
            <i class="fa fa-circle-o-notch fa-spin"></i>
        </div>
    </div>

{% block JS %}
<!-- common libraries. required for every page-->
<script src="/static/dashbord/lib/jquery/dist/jquery.min.js"></script>
<script src="/static/dashbord/lib/jquery-pjax/jquery.pjax.js"></script>
<script src="/static/dashbord/lib/bootstrap-sass/assets/javascripts/bootstrap.min.js"></script>
<script src="/static/dashbord/lib/widgster/widgster.js"></script>
<script type="text/javascript" src="/static/js/ws4redis.js"></script>


<script type="text/javascript">
$(function() {
  $('.side-nav a[href^="/' + location.pathname.split("/")[1] + '"]').addClass('active');
});


jQuery(document).ready(function($) {
    var ws4redis = WS4Redis({
        //uri: 'ws://www.iqoptionexperts.com:8000/ws/foobar?subscribe-broadcast&publish-broadcast&echo',
        uri: '{{ WEBSOCKET_URI }}active_signal?subscribe-broadcast&publish-broadcast&echo',
        //connecting: on_connecting,
        //connected: on_connected,
        receive_message: receiveMessage,
        //disconnected: on_disconnected,
        heartbeat_msg: {{ WS4REDIS_HEARTBEAT }}
    });

    // attach this function to an event handler on your site

    /*    function sendMessage() {
            ws4redis.send_message('A message');
        }

        function on_connecting() {
            console.log('Websocket is connecting...');
        }

        function on_connected() {
            ws4redis.send_message('Hello');
        }

        function on_disconnected(evt) {
            console.log('Websocket was disconnected: ' + JSON.stringify(evt));
        }*/

    // receive a message though the websocket from the server
    
    function receiveMessage(msg) {
        //$("#active-signal-table").append(msg)
        console.log('Message from Websocket: ' + msg);
    }
});

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90124738-1', 'auto');
  ga('send', 'pageview');

</script>

{% endblock JS%}

</body>
</html>
